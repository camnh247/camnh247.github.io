<html>
  <head>
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="-1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Gia Phả Nguyễn Ngọc</title>
    <link rel="stylesheet" href="styles.css" />

    <script>
      const test = [
        {
          primaryPerson: {
            name: "Nguyễn Ngọc Giản",
            birthPlace: "Quê quán",
            birthYear: "Không biết",
            deathYear: "Đã mất",
            gender: 0,
          },
          secondaryPerson: {
            name: "Phạm Thị Nhuế",
            birthPlace: "Quê quán",
            birthYear: "Không biết",
            deathYear: "Đã mất",
            gender: 1,
          },
          children: [
            {
              primaryPerson: {
                name: "Nguyễn Ngọc Cứ",
                birthPlace: "Quê quán",
                birthYear: "Không biết",
                deathYear: "Đã mất",
                gender: 0,
              },
              secondaryPerson: {
                name: "Huỳnh Thị Chiết",
                birthPlace: "Quê quán",
                birthYear: "Không biết",
                deathYear: "Đã mất",
                gender: 1,
              },
              children: [
                {
                  primaryPerson: {
                    name: "Nguyễn Ngọc Mính",
                    birthPlace: "Quê quán",
                    birthYear: "Không biết",
                    deathYear: "Đã mất",
                    gender: 0,
                  },
                  secondaryPerson: {
                    name: "Lê Thị Hữu",
                    birthPlace: "Quê quán",
                    birthYear: "Không biết",
                    deathYear: "Đã mất",
                    gender: 1,
                  },
                  children: [
                    {
                      primaryPerson: {
                        name: "Lê Thị Lợi",
                        birthPlace: "Quê quán",
                        birthYear: "Không biết",
                        deathYear: "Đã mất",
                        gender: 1,
                      },
                      secondaryPerson: {
                        name: "Nguyễn Ngọc Hài",
                        birthPlace: "Quê quán",
                        birthYear: "Không biết",
                        deathYear: "Đã mất",
                        gender: 0,
                      },
                      thirdPerson: {
                        name: "Châu Thị Thường",
                        birthPlace: "Quê quán",
                        birthYear: "Không biết",
                        deathYear: "Đã mất",
                        gender: 1,
                      },
                      children: [
                        {
                          primaryPerson: {
                            name: "Nguyễn Ngọc Vịnh",
                            birthPlace: "Núi Thành, QN",
                            birthYear: "Không biết",
                            deathYear: "Đã mất",
                            gender: 0,
                          },
                          secondaryPerson: {
                            name: "Phạm Thị Huề",
                            birthPlace: "Quê quán",
                            birthYear: "Không biết",
                            deathYear: "Đã mất",
                            gender: 1,
                          },
                        },
                        {
                          primaryPerson: {
                            name: "Nguyễn Ngọc Tý (Sò)",
                            birthPlace: "Núi Thành, QN",
                            birthYear: "Không biết",
                            deathYear: "Đã mất",
                            gender: 0,
                          },
                          secondaryPerson: {
                            name: "Chưa xác đinh",
                            birthPlace: "Quê quán",
                            birthYear: "Không biết",
                            deathYear: "Đã mất",
                            gender: 1,
                          },
                        },
                        {
                          primaryPerson: {
                            name: "Nguyễn Ngọc Lãng (Dề)",
                            birthPlace: "Núi Thành, QN",
                            birthYear: "Không biết",
                            deathYear: "Đã mất",
                            gender: 0,
                          },
                          secondaryPerson: {
                            name: "Chưa xác đinh",
                            birthPlace: "Quê quán",
                            birthYear: "Không biết",
                            deathYear: "Đã mất",
                            gender: 1,
                          },
                        },
                        {
                          primaryPerson: {
                            name: "Lê Thị Tân",
                            birthPlace: "Núi Thành, QN",
                            birthYear: "Không biết",
                            deathYear: "Đã mất",
                            gender: 1,
                          },
                          secondaryPerson: {
                            name: "Nguyễn Ngọc Diệc",
                            birthPlace: "Núi Thành, QN",
                            birthYear: "Không biết",
                            deathYear: "Đã mất",
                            gender: 0,
                          },
                          children: [
                            {
                              primaryPerson: {
                                name: "Nguyễn Ngọc Triển",
                                birthPlace: "Núi Thành, QN",
                                birthYear: "Không biết",
                                deathYear: "Đã mất",
                                gender: 0,
                              },
                            },
                            {
                              primaryPerson: {
                                name: "Nguyễn Yết",
                                birthPlace: "Núi Thành, QN",
                                birthYear: "1896",
                                deathYear: "1945",
                                gender: 0,
                              },
                              secondaryPerson: {
                                name: "Võ Thị Tiền",
                                birthPlace: "Núi Thành, QN",
                                birthYear: "1898",
                                deathYear: "1975",
                                gender: 1,
                              },
                              children: [
                                {
                                  primaryPerson: {
                                    name: "Nguyễn Thao",
                                    birthPlace: "Núi Thành, QN",
                                    birthYear: "1915",
                                    deathYear: "2009",
                                    gender: 0,
                                  },
                                  secondaryPerson: {
                                    name: "Trương Thị Loã",
                                    birthPlace: "Núi Thành, QN",
                                    birthYear: "1915",
                                    deathYear: "2016",
                                    gender: 1,
                                  },
                                  children: [
                                    {
                                      primaryPerson: {
                                        name: "Nguyễn Thị Đoã",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "1941",
                                        deathYear: "1994",
                                        gender: 1,
                                      },
                                      secondaryPerson: {
                                        name: "Châu Toàn",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "Không biết",
                                        deathYear: "Đã mất",
                                        gender: 0,
                                      },
                                      children: [
                                        {
                                          primaryPerson: {
                                            name: "Châu Phúc",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1969",
                                            deathYear: "Còn sống",
                                            gender: 0,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Châu May",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1970",
                                            deathYear: "Còn sống",
                                            gender: 0,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Châu Thị Gái",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1972",
                                            deathYear: "Còn sống",
                                            gender: 1,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Châu Văn An",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1976",
                                            deathYear: "Còn sống",
                                            gender: 0,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Châu Thị Kim Quyên",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1980",
                                            deathYear: "Còn sống",
                                            gender: 1,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Châu Ngọc Long",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1983",
                                            deathYear: "Còn sống",
                                            gender: 0,
                                          },
                                        },
                                      ],
                                    },
                                    {
                                      primaryPerson: {
                                        name: "Nguyễn Thị Nga",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "1943",
                                        deathYear: "Còn sống",
                                        gender: 1,
                                      },
                                      secondaryPerson: {
                                        name: "Nguyễn Dằn",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "Không biết",
                                        deathYear: "Còn sống",
                                        gender: 0,
                                      },
                                      children: [
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn Viết Hải",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1943",
                                            deathYear: "Còn sống",
                                            gender: 0,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn Viết Hà",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1969",
                                            deathYear: "Còn sống",
                                            gender: 0,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn Thị Thuỷ",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1971",
                                            deathYear: "Còn sống",
                                            gender: 1,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn Viết Triều",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1977",
                                            deathYear: "Còn sống",
                                            gender: 0,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn Thị Lệ",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "Không biết",
                                            deathYear: "Còn sống",
                                            gender: 1,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn Thị Lài",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "Không biết",
                                            deathYear: "Còn sống",
                                            gender: 1,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn Viết Tuấn Khiêm",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "Không biết",
                                            deathYear: "Còn sống",
                                            gender: 0,
                                          },
                                        },
                                      ],
                                    },
                                    {
                                      primaryPerson: {
                                        name: "Nguyễn Thị Sang",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "1945",
                                        deathYear: "Còn sống",
                                        gender: 1,
                                      },
                                      secondaryPerson: {
                                        name: "Bùi Xá",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "Không biết",
                                        deathYear: "Đã chết",
                                        gender: 0,
                                      },
                                      children: [
                                        {
                                          primaryPerson: {
                                            name: "Bùi Thái Sung",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1977",
                                            deathYear: "Còn sống",
                                            gender: 0,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Bùi Thị Kiều Oanh",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1984",
                                            deathYear: "Còn sống",
                                            gender: 1,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Bùi Thái Lộc",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "1987",
                                            deathYear: "Còn sống",
                                            gender: 0,
                                          },
                                        },
                                      ],
                                    },
                                    {
                                      primaryPerson: {
                                        name: "Nguyễn Hoàng Cẩm",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "1957",
                                        deathYear: "Còn sống",
                                        gender: 0,
                                      },
                                      secondaryPerson: {
                                        name: "Trương Thị Diệu Huy",
                                        birthPlace: "Đà Nẵng",
                                        birthYear: "1971",
                                        deathYear: "Còn sống",
                                        gender: 0,
                                      },
                                      children: [
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn Hoàng Khánh",
                                            birthPlace: "Đà Nẵng",
                                            birthYear: "2000",
                                            deathYear: "Còn sống",
                                            gender: 0,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn Hoàng Anh",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "Đà Nẵng",
                                            deathYear: "Còn sống",
                                            gender: 1,
                                          },
                                        },
                                      ],
                                    },
                                    {
                                      primaryPerson: {
                                        name: "Nguyễn Thị Xí",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "1950",
                                        deathYear: "1956",
                                        gender: 1,
                                      },
                                    },
                                    {
                                      primaryPerson: {
                                        name: "Nguyễn Thị Hồng",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "1958",
                                        deathYear: "Còn sống",
                                        gender: 1,
                                      },
                                      secondaryPerson: {
                                        name: "Nguyễn Nhạn",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "1958",
                                        deathYear: "Còn sống",
                                        gender: 0,
                                      },
                                      children: [
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn Thị Dương",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "Không biết",
                                            deathYear: "Còn sống",
                                            gender: 1,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn Thị Khánh Ngọc",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "Không biết",
                                            deathYear: "Còn sống",
                                            gender: 1,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn Thị Hà Ly",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "Không biết",
                                            deathYear: "Còn sống",
                                            gender: 1,
                                          },
                                        },
                                        {
                                          primaryPerson: {
                                            name: "Nguyễn An",
                                            birthPlace: "Núi Thành, QN",
                                            birthYear: "Không biết",
                                            deathYear: "Còn sống",
                                            gender: 0,
                                          },
                                        },
                                      ],
                                    },
                                    {
                                      primaryPerson: {
                                        name: "Nguyễn Vô Danh",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "Không biết",
                                        deathYear: "Đã mất",
                                        gender: 0,
                                      },
                                    },
                                    {
                                      primaryPerson: {
                                        name: "Nguyễn Thị Lựu",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "1960",
                                        deathYear: "2002",
                                        gender: 1,
                                      },
                                    },
                                    {
                                      primaryPerson: {
                                        name: "Nguyễn Vô Danh",
                                        birthPlace: "Núi Thành, QN",
                                        birthYear: "Không biết",
                                        deathYear: "Đã mất",
                                        gender: 0,
                                      },
                                    },
                                  ],
                                },
                              ],
                            },
                            {
                              primaryPerson: {
                                name: "Nguyễn Ngọc Kiến",
                                birthPlace: "Núi Thành, QN",
                                birthYear: "Không biết",
                                deathYear: "Đã mất",
                                gender: 0,
                              },
                            },
                          ],
                        },
                        {
                          primaryPerson: {
                            name: "Nguyễn Ngọc Diệc",
                            birthPlace: "Núi Thành, QN",
                            birthYear: "Không biết",
                            deathYear: "Đã mất",
                            gender: 0,
                          },
                          secondaryPerson: {
                            name: "Ung Thị Thực",
                            birthPlace: "Quê quán",
                            birthYear: "Không biết",
                            deathYear: "Đã mất",
                            gender: 1,
                          },
                        },
                        {
                          primaryPerson: {
                            name: "Nguyễn Ngọc Mỹ",
                            birthPlace: "Núi Thành, QN",
                            birthYear: "Không biết",
                            deathYear: "Đã mất",
                            gender: 0,
                          },
                          secondaryPerson: {
                            name: "Chưa xác đinh",
                            birthPlace: "Quê quán",
                            birthYear: "Không biết",
                            deathYear: "Đã mất",
                            gender: 1,
                          },
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
      ];

      (() => {
        const isCouple = (couple) =>
          couple.secondaryPerson && couple.secondaryPerson.name;

        const isThirdPerson = (couple) =>
          couple.thirdPerson && couple.thirdPerson.name;

        const genderClass = (person) =>
          person.gender === 0 ? "Male" : "Female";

        const description = (person) =>
          `${person.name} \n ${person.birthPlace} \n ${person.birthYear} - ${person.deathYear}`;

        const createNode = (couple) => {
          const ul = document.createElement("ul");
          const li = document.createElement("li");
          const div = document.createElement("div");
          const ulChildren = document.createElement("ul");

          // Primary person
          const primaryPerson = document.createElement("span");
          primaryPerson.innerHTML = description(couple.primaryPerson);
          primaryPerson.classList.add(genderClass(couple.primaryPerson));
          div.appendChild(primaryPerson);

          // Check couple
          if (isCouple(couple)) {
            li.classList.add("couple");

            const secondaryPerson = document.createElement("span");
            secondaryPerson.innerHTML = description(couple.secondaryPerson);
            secondaryPerson.classList.add(genderClass(couple.secondaryPerson));
            div.appendChild(secondaryPerson);
          }

          // Check third person
          if (isThirdPerson(couple)) {
            const thirdPerson = document.createElement("span");
            thirdPerson.innerHTML = description(couple.thirdPerson);
            thirdPerson.classList.add(genderClass(couple.thirdPerson));
            div.appendChild(thirdPerson);
          }

          li.appendChild(div);

          return { ul, li, div, ulChildren };
        };

        const recursive = (container, couple) => {
          const { ul, li, div, ulChildren } = createNode(couple);

          // Check children
          if (couple.children && couple.children.length) {
            couple.children.forEach((element) => {
              recursive(ulChildren, element);
            });
            li.appendChild(ulChildren);
          }

          container.appendChild(li);
        };

        setTimeout(() => {
          const familyTreeDiv = document.getElementById("FamilyTreeDiv");
          const ul = document.createElement("ul");

          test.forEach((element) => {
            const li = document.createElement("li");
            recursive(li, element);
            ul.appendChild(li);
          });

          familyTreeDiv.append(ul);
        }, 1);
      })();
    </script>
  </head>

  <body>
    <div class="tree" id="FamilyTreeDiv"></div>
  </body>
</html>
